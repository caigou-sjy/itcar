<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>首页</title>
    <link rel="stylesheet" href="elementUI/index.css">
    <script src="elementUI/vue.js"></script>
    <script src="elementUI/index.js"></script>
    <script src="elementUI/echarts.js"></script>
    <script src="elementUI/vue-echarts.js"></script>
    <script src="elementUI/axios.min.js"></script>
</head>

<style>
    .el-header {
        background-color: #B3C0D1;
        color: #333;
        line-height: 60px;

    }



    .el-aside {
        color: #333;

    }

    /* 走马灯 */
    .el-carousel__item h3 {
        color: #475669;
        text-align: center;
        font-size: 14px ;
        /* 设置主图透明度 */
        opacity: 1;
        line-height: 600px;
        margin: 0;
    }

    .title {
        text-align: center;
        color: #457eb6;
    }


    .img {
        background-image: url("img/img207.jpg");

        background-size: cover;
    }

    .el-header, .el-footer {
    background-color: #B3C0D1;
    color: #333;
    text-align: center;
    line-height: 60px;
    margin-right: 100px;
  }
  
  .el-aside {
    background-color: #D3DCE6;
    color: #333;
    text-align: center;
    line-height: 100px;
    opacity: 93%;
    margin-left: 100px;
  }
  
  .el-main {
    background-color: #E9EEF3;
    color: #333;
    text-align: center;
    line-height: 50px;
    opacity: 93%;
    margin-right: 100px;
  }
  
  body > .el-container {
    margin-bottom: 40px;
  }
  
  .el-container:nth-child(5) .el-aside,
  .el-container:nth-child(6) .el-aside {
    line-height: 260px;
  }
  
  .el-container:nth-child(7) .el-aside {
    line-height: 320px;
  }
</style>

<body class="img">
    <div id="app">

        <h1 style="margin-left: 100px; color: rgb(255, 255, 255);font-size: 50px;">智慧优游租车平台</h1>
        <el-container>
            <el-aside width="200px" style="background-color: rgb(238, 241, 246)">
                <el-menu :default-openeds="['1', '3']">
                    <el-submenu index="1">
                        <template slot="title"><i class="el-icon-message"></i>个人账号管理</template>
                        <el-menu-item-group>
                            <template slot="title">个人信息管理</template>
                            <el-menu-item index="1-1" @click="getUserInfo()">查看个人信息</el-menu-item>
                            <el-menu-item index="1-2">修改个人信息</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group title="账号管理">
                            <el-menu-item index="1-3">修改基础信息</el-menu-item>
                            <el-menu-item index="1-4">修改密码</el-menu-item> 
                        </el-menu-item-group>
                    </el-submenu>
                    <el-submenu index="2">
                        <template slot="title"><i class="el-icon-menu"></i>销售管理</template>
                        <el-menu-item-group>
                            <template slot="title">租车营收管理</template>
                            <el-menu-item index="2-1" @click="getBpressInfo()">查看租车记录</el-menu-item>
                            <el-menu-item index="2-2" @click="getHighGraph()">查看租车营收</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group>
                            <template slot="title">优惠活动营收管理</template>
                            <el-menu-item index="2-3">查看优惠券使用记录</el-menu-item>
                            <el-menu-item index="2-4">看优惠活动营收</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <el-submenu index="3">
                        <template slot="title"><i class="el-icon-menu"></i>员工管理</template>
                        <el-menu-item-group>
                            <template slot="title">员工账号管理</template>
                            <el-menu-item index="3-1" @click="getStaffList()">查看员工列表</el-menu-item>
                            <el-menu-item index="3-2" @click="getPrivsList()">查看员工权限</el-menu-item>
                            <el-menu-item index="3-3" @click="getPrivsForm()">修改员工权限</el-menu-item> 
                        </el-menu-item-group>
                    </el-submenu>
                    <el-submenu index="4">
                        <template slot="title"><i class="el-icon-menu"></i>活动管理</template>
                        <el-menu-item-group>
                            <template slot="title">优惠活动管理</template>
                            <el-menu-item index="4-1" @click="getActivityList()">查看活动列表</el-menu-item>
                            <el-menu-item index="4-2" @click="getActivityForm()">添加优惠活动</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group>
                            <template slot="title">优惠券管理</template>
                            <el-menu-item index="4-1" @click="getCouponList()">查看优惠券列表</el-menu-item>
                            <el-menu-item index="4-2" @click="getCouponForm()">添加优惠券</el-menu-item>
                        </el-menu-item-group>
                    </el-submenu>
                    <el-submenu index="5">
                        <template slot="title"><i class="el-icon-menu"></i>车辆管理</template>
                        <el-menu-item-group>
                            <template slot="title">车辆信息管理</template>
                            <el-menu-item index="5-1" @click="getCarList()">查看车辆列表</el-menu-item>
                            <el-menu-item index="5-2">查看维修列表</el-menu-item>
                            <el-menu-item index="3-3">添加车辆</el-menu-item> 
                        </el-menu-item-group>
                    </el-submenu>
                    <!-- <el-submenu index="3">
                        <template slot="title"><i class="el-icon-setting"></i>医疗管理</template>
                        <el-menu-item-group>
                            <template slot="title">分组一</template>
                            <el-menu-item index="3-1">选项1</el-menu-item>
                            <el-menu-item index="3-2">选项2</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group title="分组2">
                            <el-menu-item index="3-3">选项3</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="3-4">
                            <template slot="title">选项4</template>
                            <el-menu-item index="3-4-1">选项4-1</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="4">
                        <template slot="title"><i class="el-icon-setting"></i>老年兴趣生活</template>
                        <el-menu-item-group>
                            <template slot="title">分组一</template>
                            <el-menu-item index="4-1">选项1</el-menu-item>
                            <el-menu-item index="4-2">选项2</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group title="分组2">
                            <el-menu-item index="4-3">选项3</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="4-4">
                            <template slot="title">选项4</template>
                            <el-menu-item index="4-4-1">选项4-1</el-menu-item>
                        </el-submenu> -->
                    </el-submenu>
                </el-menu>
            </el-aside>

            <el-container>
                <el-header style="text-align: right; font-size: 12px">

                    <el-col :span="12">
                        <div class="demo-basic--circle">
                            <div class="block">
                                <el-avatar :size="50" :src="userPicture"></el-avatar>
                            </div>
                        </div>
                    </el-col>


                    <i class="el-icon-s-home" @click="backToIndex()" style="margin-right: 15px">回到首页</i>


                    <el-dropdown>
                        <!-- <i class="el-icon-s-home" style="margin-right: 15px"></i> -->
                        <!-- <el-dropdown-menu slot="dropdown"> -->
                            <!-- <el-dropdown-item ><a href="index.html" style="text-decoration: none;">回到主页</a></el-dropdown-item> -->
                            
                            <!-- <el-dropdown-item>新增</el-dropdown-item>
                            <el-dropdown-item>删除</el-dropdown-item> -->
                        <!-- </el-dropdown-menu> -->
                    </el-dropdown>
                    <span>当前用户：{{username}}</span>
                    <i class="el-icon-error" @click="logout()" style="margin-right: 15px">退出登录</i>
                </el-header>

                <el-main>

                    <div :style="states.showIndex" class="title">
                        <font size="4" face="宋体">
                            <h1>
                                INTELLIGENT TRANSPORTATION

                                安全有速,自驾畅游。百变车型,跃动于行。
                            </h1>
                        </font>
                        <el-carousel height="400px">
                            <el-carousel-item v-for="(img,index) in imgs">
                                <!-- <h3 class="small"> -->
                                <h3 class="medium">
                                    <img :src="img" style="height: 400px;" />
                                </h3>
                            </el-carousel-item>
                        </el-carousel>
                        
                        <font size="4" face="宋体">
                            <h1>
                                CHOOSE THE PEOPLE AND TRUST THEM
                            </h1>
                            <h1>
                                你的信赖，共同精彩！
                            </h1>
                        </font>


                    </div>


                    <div :style="states.showUserInfo">
                        
                        <br>
                        <span>当前用户：{{username}}</span>
                        
                        <br>
                        <!-- <h3>
                            用户照片：______<img :src="userPicture"
                                width="100px">_______
                        </h3> -->
                        
                        <br>

                        <el-table :data="userTable" border style="width: 100%">
                            <el-table-column fixed prop="username" label="姓名" width="150">
                            </el-table-column>
                            <el-table-column prop="age" label="年龄" width="120">
                            </el-table-column>
                            <el-table-column prop="gender" label="性别" width="120">
                            </el-table-column>
                            <el-table-column prop="phone" label="电话" width="120">
                            </el-table-column>
                            <el-table-column prop="birth" label="出生日期" width="120">
                            </el-table-column>
                            <el-table-column prop="address" label="地址" width="300">
                            </el-table-column>

                            <el-table-column prop="createtime" label="注册日期" width="120">
                            </el-table-column>
                            <el-table-column fixed="right" label="操作" width="100">
                                <template slot-scope="scope">
                                    <el-button @click="handleClick(scope.row)" type="text" size="small">注销</el-button>
                                    <!-- <el-button type="text" size="small">编辑</el-button> -->
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>

                    <div :style="states.showStaffList">
                        
                        <el-table :data="staffTable" border style="width: 100%">

                            <el-table-column fixed prop="id" label="工号" width="150">
                            </el-table-column> 
                            <el-table-column fixed prop="name" label="姓名" width="150">
                            </el-table-column>
                            <el-table-column prop="dept" label="部门" width="150">
                            </el-table-column>
                            <el-table-column prop="role" label="角色" width="150">
                            </el-table-column>

                            <el-table-column fixed="right" label="操作" width="100">
                                <template slot-scope="scope">
                                    <el-button @click="handleClick(scope.row)" type="text" size="small">注销</el-button>
                                    <!-- <el-button type="text" size="small">编辑</el-button> -->
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>

                    <div :style="states.showPeivsList">
                        
                        <el-table :data="privsTable" border style="width: 100%">
                            <el-table-column fixed prop="staffName" label="员工姓名" width="150">
                            </el-table-column>
                            <el-table-column prop="privs" label="权限" width="500">
                            </el-table-column>

                            <el-table-column fixed="right" label="操作" width="100">
                                <template slot-scope="scope">
                                    <el-button @click="handleClick(scope.row)" type="text" size="small">注销</el-button>
                                    <!-- <el-button type="text" size="small">编辑</el-button> -->
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>

                    <div :style="states.showPrivsForm">
                        <el-form :model="privsForm" :rules="rules" ref="privsForm" label-width="100px" class="privsForm">
                            <el-form-item label="员工工号" prop="privsStaffId">
                              <el-input v-model="privsForm.privsStaffId"></el-input>
                            </el-form-item>
                            <el-form-item label="权限" prop="privsArray">
                              <el-checkbox-group v-model="privsForm.privsArray">
                                <el-checkbox label="查看员工列表" name="type"></el-checkbox>
                                <el-checkbox label="查看员工权限" name="type"></el-checkbox>
                                <el-checkbox label="修改员工权限" name="type"></el-checkbox>
                                <el-checkbox label="查看活动列表" name="type"></el-checkbox>
                                <el-checkbox label="添加优惠活动" name="type"></el-checkbox>
                                <el-checkbox label="查看优惠券列表" name="type"></el-checkbox>
                                <el-checkbox label="添加优惠券" name="type"></el-checkbox> 
                              </el-checkbox-group>
                            </el-form-item>
                            <el-form-item>
                              <el-button type="primary" @click="submitForm('privsForm')">提交</el-button>
                              <el-button @click="resetForm('privsForm')">重置</el-button>
                            </el-form-item>
                          </el-form>
                    </div>

                    <div :style="states.showActivityList">
                        <el-table :data="activityTable" border style="width: 100%">
                            <el-table-column fixed prop="actId" label="活动编号" width="150">
                            </el-table-column>
                            <el-table-column prop="actName" label="活动名称" width="120">
                            </el-table-column>
                            <el-table-column prop="beginTime" label="开始时间" width="120">
                            </el-table-column>
                            <el-table-column prop="endTime" label="结束时间" width="120">
                            </el-table-column>
                            <el-table-column prop="couponNum" label="优惠券种数" width="120">
                            </el-table-column>
                            <el-table-column fixed="right" label="操作" width="100">
                                <template slot-scope="scope">
                                    <el-button @click="handleClick(scope.row)" type="text" size="small">关闭活动</el-button>
                                    <!-- <el-button type="text" size="small">编辑</el-button> -->
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>

                    <div :style="states.showActivityForm">
                        <el-form :model="activityForm" :rules="rules" ref="activityForm" label-width="150px" class="activityForm">
                            <el-form-item label="活动名称" prop="actName">
                                <el-input v-model="activityForm.actName"></el-input>
                            </el-form-item>
                            <el-form-item label="活动开始时间" prop="actBeginTime">
                                <el-date-picker
                                        v-model="activityForm.actBeginTime"
                                        type="datetime"
                                        placeholder="选择日期时间">
                                </el-date-picker>
                            </el-form-item>
                            <el-form-item label="活动结束时间" prop="actEndTime">
                                <el-date-picker
                                        v-model="activityForm.actEndTime"
                                        type="datetime"
                                        placeholder="选择日期时间">
                                </el-date-picker>
                            </el-form-item>
                            <el-form-item label="活动优惠券数量" prop="actCouponNum">
                                <el-input v-model="activityForm.actCouponNum"></el-input>
                            </el-form-item>
                            <el-form-item>
                                <el-button type="primary" @click="submitForm('privsForm')">提交</el-button>
                                <el-button @click="resetForm('privsForm')">重置</el-button>
                            </el-form-item>
                        </el-form>
                    </div>

                    <div :style="states.showCouponList">
                        <el-table :data="couponTable" border style="width: 100%">
                            <el-table-column fixed prop="id" label="优惠券编号" width="150">
                            </el-table-column>
                            <el-table-column prop="name" label=优惠券名称 width="120">
                            </el-table-column>
                            <el-table-column prop="type" label=类型 width="120">
                            </el-table-column>
                            <el-table-column prop="discount" label="折扣" width="120">
                            </el-table-column>
                            <el-table-column prop="activityId" label="所属活动Id" width="120">
                            </el-table-column>
                            <el-table-column fixed="right" label="操作" width="100">
                                <template slot-scope="scope">
                                    <el-button @click="handleClick(scope.row)" type="text" size="small">撤销</el-button>
                                    <!-- <el-button type="text" size="small">编辑</el-button> -->
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>

                    <div :style="states.showCouponForm">
                        <el-form :model="couponForm" :rules="rules" ref="couponForm" label-width="100px" class="couponForm">
                            <el-form-item label="优惠券名称" prop="cpName">
                                <el-input v-model="couponForm.cpName"></el-input>
                            </el-form-item>
                            <el-form-item label="优惠券类型" prop="cpType">
                                <el-radio-group v-model="couponForm.cpType">
                                    <el-radio label="折扣券"></el-radio>
                                    <el-radio label="满减券"></el-radio>
                                </el-radio-group>
                            </el-form-item>
                            <el-form-item label="折扣内容" prop="cpDiscount">
                                <el-input v-model="couponForm.cpDiscount"></el-input>
                            </el-form-item>
                            <el-form-item label="所属活动Id" prop="cpActivityId">
                                <el-input v-model="couponForm.cpActivityId"></el-input>
                            </el-form-item>
                            <el-form-item>
                                <el-button type="primary" @click="submitForm('privsForm')">提交</el-button>
                                <el-button @click="resetForm('privsForm')">重置</el-button>
                            </el-form-item>
                        </el-form>
                    </div>

                    <div :style="states.showBpressInfo">
                        
                        <br>
                        <span>当前用户：{{username}}</span>
                        <br>
                       


                        <el-table :data="bpressTable" border style="width: 100%">
                            <el-table-column fixed prop="id" label="记录编号" width="150">
                            </el-table-column>
                            <el-table-column prop="high" label="收缩压(mmgh)" width="120">
                            </el-table-column>
                            <el-table-column prop="low" label="舒张压(mmgh)" width="120">
                            </el-table-column>
                            <el-table-column prop="rate" label="心率(次/分钟)" width="120">
                            </el-table-column>
                            <el-table-column prop="uid" label="用户编号" width="120">
                            </el-table-column>
                            <el-table-column prop="date" label="测量日期" width="120">
                            </el-table-column>


                            <el-table-column fixed="right" label="操作" width="100">
                                <template slot-scope="scope">
                                    <el-button @click="handleClick(scope.row)" type="text" size="small">查看</el-button>
                                    <el-button type="text" size="small">编辑</el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>

                    <div :style="states.showHighGraph">
                        <div id="highGraph" style="width: 600px; height: 400px;"></div>


                    </div>


                </el-main>

            </el-container>
        </el-container>
    </div>
</body>
<script>
    var myChart = null;

    new Vue({
        el: '#app',
        data() {
            return {

                userPicture: '',
                userId: "-1",
                size: "medium",
                states: {
                    showIndex: 'display:block',
                    showUserInfo: 'display:none',
                    showBpressInfo: 'display:none',
                    showHighGraph: 'display:none',
                    showStaffList:'display:none',
                    showActivityList:'display:none',
                    showCouponList:'display:none',
                    showPeivsList:'display:none',
                    showUpdatePrivs:'display:none',
                    showPrivsForm:'display:none',
                    showActivityForm:'display:none',
                    showCouponForm:'display:none',

                },
                username: "未命名",
                userTable: [
                    {
                    date: '2016-05-02',
                    username: '王小虎',
                    age:"23",
                    gender:"男",
                    phone:"13399162213",
                    birth:"2016-05-02",
                    address: '上海市普陀区金沙江路 1518 弄',
                    createtime:"2016-05-02"
                    }
                ],
                staffTable:[
                    {id:'1',name:'王小虎',dept:'部门1',role:'普通员工'},
                    {id:'2',
                    name:'员工2',
                    dept:'部门2',
                    role:'普通员工',
                    },
                    {id:'3',
                    name:'员工3',
                    dept:'部门3',
                    role:'普通员工',
                    },
                    {id:'4',
                    name:'员工4',
                    dept:'部门4',
                    role:'普通员工',
                    },
                ],
                privsTable:[
                    {
                        staffName:'王小虎',
                        privs:'查看员工列表，查看员工权限，修改员工权限，查看活动列表，添加优惠活动，查看优惠券列表，添加优惠券'
                    },
                ],
                privsForm:{
                    privsStaffId:'',
                    privsArray:[],
                },
                activityForm:{
                    actName:'',
                    actBeginTime:'',
                    actEndTime:'',
                    actCouponNum:'',
                },
                couponForm:{
                    cpName:'',
                    cpType:'',
                    cpDiscount:'',
                    cpActivityId:'',
                },
                rules:{
                    privsStaffId:[
                        {required: true, message:'请输入员工工号', trigger: 'blur'}
                    ],
                    privsArray:[
                        {type:'array', required: true, message:'请至少选择一项权限', trigger: 'change'},
                    ],
                    actName:[
                        {required: true, message:'请输入', trigger: 'blur'}
                    ],
                    actBeginTime: [
                        { type: 'date', required: true, message: '请选择日期', trigger: 'change' }
                    ],
                    actEndTime: [
                        { type: 'date', required: true, message: '请选择时间', trigger: 'change' }
                    ],
                    actCouponNum:[
                        {required: true, message:'请输入', trigger: 'blur'}
                    ],
                    cpName:[
                        {required: true, message:'请输入', trigger: 'blur'}
                    ],
                    cpType:[
                        { required: true, message:'请选择', trigger: 'change'},
                    ],
                    cpDiscount:[
                        {required: true, message:'请输入', trigger: 'blur'}
                    ],
                    cpActivityId:[
                        {required: true, message:'请输入', trigger: 'blur'}
                    ],
                },
                bpressTable: [],
                activityTable:[
                    {
                        actId:'1',
                        actName:'活动1',
                        beginTime:'2022-1-1 17:00:00',
                        endTime:'2022-1-1 19:00:00',
                        couponNum:'2',
                    },{
                        actId:'2',
                        actName:'活动2',
                        beginTime:'2022-1-2 17:00:00',
                        endTime:'2022-1-2 19:00:00',
                        couponNum:'1',
                    },
                ],
                couponTable:[
                    {
                        id:'1',
                        name:'券1',
                        type:'打折',
                        discount:'88折',
                        activityId:'1',
                    },{
                        id:'2',
                        name:'券2',
                        type:'打折',
                        discount:'98折',
                        activityId:'1',
                    },{
                        id:'3',
                        name:'券3',
                        type:'满减',
                        discount:'满100-10',
                        activityId:'2',
                    },
                ],
                option: {
                    xAxis: {
                        type: 'category',
                        data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    },
                    yAxis: {
                        type: 'value'
                    },
                    series: [{
                        data: [150, 230, 224, 218, 135, 147, 260],
                        type: 'line'
                    }]
                },

                imgs: [
                   'img/img8.jpg',
                    'img/img12.jpg',
                    'img/img6.jpg',
                    'img/img7.jpg',
                    'img/img9.jpg',
                    'img/img10.jpg',
                    'img/img11.jpg',
                ],

            }
        },
        mounted: function () {
            myChart = echarts.init(document.getElementById('highGraph'));
            myChart.setOption(this.option);
            var _this = this;
            //TODO:连接后台后打开此项
            //_this.username = localStorage.getItem("username");

            axios.get('../api/user/init')
                .then(function (response) {
                    console.log(response.data);
                    if (response.data.code == 2000) {
                        _this.userPicture = response.data.results.picture;
                        console.log("mounted==>"+_this.userPicture);
                        _this.userId = response.data.results.id;
                        console.log("init():" + _this.userId);
                        console.log("init():" + _this.userPicture);

                    } else {
                        alert("初始化失败，将强制退出");
                        window.location.href = "elyy-login1.html";

                    }
                })
                .catch(function (error) {
                    console.log(error);
                });
        },
        methods: {
            getUserInfo() {
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showUserInfo = 'display:block';
                axios.get('../api/user/getUserInfo')
                    .then(function (response) {
                        console.log(response.data);
                        if (response.data.code == 2003) {
                            _this.userTable = response.data.results;
                        } else {
                            alert("拉取信息失败，请联系管理员！");
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            getPrivsList(){
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showPeivsList = 'display:block';
 
            },
            getStaffList(){
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showStaffList = 'display:block';

            },
            getActivityList(){
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showActivityList = 'display:block';
            },
            getCouponList(){
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showCouponList = 'display:block';
            },
            getPrivsForm(){
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showPrivsForm = 'display:block'; 
            },
            getActivityForm(){
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showActivityForm = 'display:block';
            },
            getCouponForm(){
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showCouponForm = 'display:block';
            },
            submitForm(formName){
                this.$refs[formName].validate((valid) => {
                  if (valid) {
                    alert('submit!');
                   } else {
                    console.log('error submit!!');
                    return false;
                  }
                 });
             },
            resetForm(formName) {
                 this.$refs[formName].resetFields();
            },
            getBpressInfo() {
                var _this = this;
                var _uid = _this.userId;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showBpressInfo = 'display:block';
                console.log("getBpressInfo():" + _this.username);
                console.log("getBpressInfo():" + _this.userId);
                axios.get('../api/bpress/getBpressInfo?uid=' + _uid)
                    .then(function (response) {
                        console.log(response.data);
                        if (response.data.code == 2006) {
                            _this.bpressTable = response.data.results;
                            console.log(_this.bpressTable);
                        } else {
                            alert("拉取信息失败，请联系管理员！");
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            getHighGraph() {
                var _this = this;
                var _uid = _this.userId;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }
                _this.states.showHighGraph = 'display:block';

                console.log("getHighGraph():" + _this.uid);
                axios.get('../api/bpress/getHighGraph?uid=' + _uid)
                    .then(function (response) {
                        console.log(response.data);
                        if (response.data.code == 2007) {
                            var _vo = response.data.results;
                            _this.option.xAxis.data = _vo.x;
                            _this.option.series[0].data = _vo.y;
                            myChart.setOption(_this.option);

                        } else {
                            alert("拉取信息失败，请联系管理员！");
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });


            },
            backToIndex() {
                var _this = this;
                for (var state in _this.states) {
                    _this.states[state] = 'display:none';
                }

                _this.states.showIndex = 'display:block';
            },
            logout() {
                axios.get('../api/user/logout')
                    .then(function (response) {
                        console.log(response.data);
                        if (response.data.code == 2004) {
                            alert("已退出！");
                            window.location.href = "login.html";
                        } else {
                            alert("退出失败，将强制退出");
                            window.location.href = "elyy-login1.html";

                        }
                    })

                    .catch(function (error) {
                        console.log(error);
                    });
            }



        }
    });
</script>

</html>